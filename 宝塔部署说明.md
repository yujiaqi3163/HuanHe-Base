# 宝塔服务器 - 创建超级管理员操作说明

## 📋 前置检查

在开始之前，请确保您已上传以下文件到宝塔服务器：

```
/www/wwwroot/AI-XianYu-Sucai-app/
├── scripts/
│   ├── create_admin_bt.py    # 宝塔专用创建脚本 ⭐
│   ├── diagnose_bt.py        # 环境诊断脚本
│   └── create_admin.py       # 通用脚本
├── app/
├── .env
└── ...
```

---

## 🚀 操作步骤

### 第一步：进入项目目录

```bash
cd /www/wwwroot/AI-XianYu-Sucai-app
```

### 第二步：运行环境诊断（可选，推荐）

```bash
/www/wwwroot/AI-XianYu-Sucai-app/0d2605aebbb8df54ac91fdc0ff7e2a95_venv/bin/python3 scripts/diagnose_bt.py
```

**查看诊断结果，确保：**
- ✅ .env 文件存在
- ✅ app 目录存在
- ✅ 可以导入项目模块

### 第三步：运行创建管理员脚本

```bash
/www/wwwroot/AI-XianYu-Sucai-app/0d2605aebbb8df54ac91fdc0ff7e2a95_venv/bin/python3 scripts/create_admin_bt.py
```

---

## 👤 账号信息

| 账号 | 邮箱 | 密码 | 用途 |
|------|------|------|------|
| **pc_yujiaqi** | 2798479668@qq.com | **Yun803163** | 电脑端 |
| **pe_yujiaqi** | aa13178775196@163.com | **Yun803163** | 手机端 |

---

## 🔧 常见问题

### 问题1：提示 "No module named 'app'"

**原因**：Python 路径不正确

**解决**：确保在项目根目录下运行脚本

```bash
cd /www/wwwroot/AI-XianYu-Sucai-app
```

### 问题2：提示 ".env 文件不存在"

**原因**：.env 文件未上传或路径不对

**解决**：检查 .env 文件是否在项目根目录

### 问题3：数据库错误

**原因**：数据库路径或权限问题

**解决**：
```bash
# 检查数据库文件权限
chmod 644 /www/wwwroot/AI-XianYu-Sucai-app/app.db
# 检查目录权限
chmod 755 /www/wwwroot/AI-XianYu-Sucai-app
```

### 问题4：虚拟环境问题

**如果虚拟环境路径不同，请修改为您的实际路径**，例如：

```bash
# 查看虚拟环境位置
ls -la /www/wwwroot/AI-XianYu-Sucai-app/

# 使用正确的虚拟环境 Python
/path/to/your/venv/bin/python3 scripts/create_admin_bt.py
```

---

## 📝 脚本说明

| 脚本 | 说明 |
|------|------|
| `create_admin_bt.py` | ⭐ 宝塔专用，推荐使用，自动检测路径 |
| `create_admin.py` | 通用版本，需要交互式确认 |
| `diagnose_bt.py` | 环境诊断，帮助排查问题 |

---

## 💡 提示

- ✅ 脚本不会清除任何现有数据
- ✅ 如果账号已存在，会自动更新邮箱和权限
- ✅ 操作前建议先备份数据库
